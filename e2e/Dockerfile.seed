FROM pezzottify-e2e-catalog-server:latest AS cli-source

FROM python:3.12-slim

# Install runtime deps for cli-auth (libsqlite3) and bash
RUN apt-get update && apt-get install -y --no-install-recommends \
    libsqlite3-0 \
    && rm -rf /var/lib/apt/lists/*

# Copy cli-auth binary from catalog-server image
COPY --from=cli-source /usr/local/bin/cli-auth /usr/local/bin/cli-auth

WORKDIR /seed
